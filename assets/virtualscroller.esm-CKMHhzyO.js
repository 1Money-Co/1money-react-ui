import{r as v}from"./index-CP2yOfOm.js";import{u as _t,P as At,C as Mt,o as Wt,d as $t,j as kt,p as Bt,D as P,f as Y,O as F,c as Ie,I as Dt}from"./componentbase.esm-D-zJM1J_.js";import{S as Jt}from"./index.esm-uggFAbkR.js";function Re(){return Re=Object.assign?Object.assign.bind():function(l){for(var i=1;i<arguments.length;i++){var u=arguments[i];for(var S in u)({}).hasOwnProperty.call(u,S)&&(l[S]=u[S])}return l},Re.apply(null,arguments)}function Z(l){"@babel/helpers - typeof";return Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Z(l)}function Xt(l,i){if(Z(l)!="object"||!l)return l;var u=l[Symbol.toPrimitive];if(u!==void 0){var S=u.call(l,i);if(Z(S)!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(l)}function Ut(l){var i=Xt(l,"string");return Z(i)=="symbol"?i:i+""}function Ye(l,i,u){return(i=Ut(i))in l?Object.defineProperty(l,i,{value:u,enumerable:!0,configurable:!0,writable:!0}):l[i]=u,l}function Kt(l){if(Array.isArray(l))return l}function Yt(l,i){var u=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(u!=null){var S,e,j,H,w=[],m=!0,q=!1;try{if(j=(u=u.call(l)).next,i===0){if(Object(u)!==u)return;m=!1}else for(;!(m=(S=j.call(u)).done)&&(w.push(S.value),w.length!==i);m=!0);}catch(G){q=!0,e=G}finally{try{if(!m&&u.return!=null&&(H=u.return(),Object(H)!==H))return}finally{if(q)throw e}}return w}}function Ue(l,i){(i==null||i>l.length)&&(i=l.length);for(var u=0,S=Array(i);u<i;u++)S[u]=l[u];return S}function Zt(l,i){if(l){if(typeof l=="string")return Ue(l,i);var u={}.toString.call(l).slice(8,-1);return u==="Object"&&l.constructor&&(u=l.constructor.name),u==="Map"||u==="Set"?Array.from(l):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?Ue(l,i):void 0}}function qt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V(l,i){return Kt(l)||Yt(l,i)||Zt(l,i)||qt()}var Gt=`
.p-virtualscroller {
    position: relative;
    overflow: auto;
    contain: strict;
    transform: translateZ(0);
    will-change: scroll-position;
    outline: 0 none;
}

.p-virtualscroller-content {
    position: absolute;
    top: 0;
    left: 0;
    /*contain: content;*/
    min-height: 100%;
    min-width: 100%;
    will-change: transform;
}

.p-virtualscroller-spacer {
    position: absolute;
    top: 0;
    left: 0;
    height: 1px;
    width: 1px;
    transform-origin: 0 0;
    pointer-events: none;
}

.p-virtualscroller-loader {
    position: sticky;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.p-virtualscroller-loader.p-component-overlay {
    display: flex;
    align-items: center;
    justify-content: center;
}

.p-virtualscroller-loading-icon {
    font-size: 2rem;
}

.p-virtualscroller-horizontal > .p-virtualscroller-content {
    display: flex;
}

/* Inline */
.p-virtualscroller-inline .p-virtualscroller-content {
    position: static;
}
`,oe=Mt.extend({defaultProps:{__TYPE:"VirtualScroller",__parentMetadata:null,id:null,style:null,className:null,tabIndex:0,items:null,itemSize:0,scrollHeight:null,scrollWidth:null,orientation:"vertical",step:0,numToleratedItems:null,delay:0,resizeDelay:10,appendOnly:!1,inline:!1,lazy:!1,disabled:!1,loaderDisabled:!1,loadingIcon:null,columns:null,loading:void 0,autoSize:!1,showSpacer:!0,showLoader:!1,loadingTemplate:null,loaderIconTemplate:null,itemTemplate:null,contentTemplate:null,onScroll:null,onScrollIndexChange:null,onLazyLoad:null,children:void 0},css:{styles:Gt}});function Ke(l,i){var u=Object.keys(l);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(l);i&&(S=S.filter(function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable})),u.push.apply(u,S)}return u}function B(l){for(var i=1;i<arguments.length;i++){var u=arguments[i]!=null?arguments[i]:{};i%2?Ke(Object(u),!0).forEach(function(S){Ye(l,S,u[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(u)):Ke(Object(u)).forEach(function(S){Object.defineProperty(l,S,Object.getOwnPropertyDescriptor(u,S))})}return l}var Qt=v.memo(v.forwardRef(function(l,i){var u=_t(),S=v.useContext(At),e=oe.getProps(l,S),j=Wt(l)||{},H=e.orientation==="vertical",w=e.orientation==="horizontal",m=e.orientation==="both",q=v.useState(m?{rows:0,cols:0}:0),G=V(q,2),g=G[0],ze=G[1],Ze=v.useState(m?{rows:0,cols:0}:0),Ce=V(Ze,2),y=Ce[0],Oe=Ce[1],qe=v.useState(0),Te=V(qe,2),Pe=Te[0],Ge=Te[1],Qe=v.useState(m?{rows:0,cols:0}:0),Le=V(Qe,2),O=Le[0],et=Le[1],tt=v.useState(e.numToleratedItems),Ee=V(tt,2),z=Ee[0],se=Ee[1],rt=v.useState(e.loading||!1),Ne=V(rt,2),L=Ne[0],ie=Ne[1],nt=v.useState([]),je=V(nt,2),W=je[0],at=je[1],lt=oe.setMetaData({props:e,state:{first:g,last:y,page:Pe,numItemsInViewport:O,numToleratedItems:z,loading:L,loaderArr:W}}),D=lt.ptm;$t(oe.css.styles,{name:"virtualscroller"});var p=v.useRef(null),b=v.useRef(null),xe=v.useRef(null),ue=v.useRef(null),_=v.useRef(m?{top:0,left:0}:0),ce=v.useRef(null),fe=v.useRef(null),Q=v.useRef({}),ee=v.useRef({}),J=v.useRef(null),X=v.useRef(null),Ve=v.useRef(null),Fe=v.useRef(null),me=v.useRef(!1),$=v.useRef(null),He=v.useRef(!1),ot=kt({listener:function(t){return Be()},when:!e.disabled}),st=V(ot,1),it=st[0],ut=Bt({target:"window",type:"orientationchange",listener:function(t){return Be()},when:!e.disabled}),ct=V(ut,1),ft=ct[0],mt=function(){return p},te=function(t){return Math.floor((t+z*4)/(e.step||1))},vt=function(t){b.current=t||b.current||P.findSingle(p.current,".p-virtualscroller-content")},ve=function(t){return e.step?Pe!==te(t):!0},ge=function(t){_.current=m?{top:0,left:0}:0,p.current&&p.current.scrollTo(t)},_e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"auto",n=Me(),a=n.numToleratedItems,c=re(),o=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,E=arguments.length>1?arguments[1]:void 0;return T<=E?0:T},s=function(T,E,A){return T*E+A},h=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ge({left:T,top:E,behavior:r})},d=m?{rows:0,cols:0}:0,I=!1;m?(d={rows:o(t[0],a[0]),cols:o(t[1],a[1])},h(s(d.cols,e.itemSize[1],c.left),s(d.rows,e.itemSize[0],c.top)),I=g.rows!==d.rows||g.cols!==d.cols):(d=o(t,a),w?h(s(d,e.itemSize,c.left),0):h(0,s(d,e.itemSize,c.top)),I=g!==d),me.current=I,ze(d)},gt=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"auto";if(r){var a=Ae(),c=a.first,o=a.viewport,s=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ge({left:E,top:A,behavior:n})},h=r==="to-start",d=r==="to-end";if(h){if(m)o.first.rows-c.rows>t[0]?s(o.first.cols*e.itemSize[1],(o.first.rows-1)*e.itemSize[0]):o.first.cols-c.cols>t[1]&&s((o.first.cols-1)*e.itemSize[1],o.first.rows*e.itemSize[0]);else if(o.first-c>t){var I=(o.first-1)*e.itemSize;w?s(I,0):s(0,I)}}else if(d){if(m)o.last.rows-c.rows<=t[0]+1?s(o.first.cols*e.itemSize[1],(o.first.rows+1)*e.itemSize[0]):o.last.cols-c.cols<=t[1]+1&&s((o.first.cols+1)*e.itemSize[1],o.first.rows*e.itemSize[0]);else if(o.last-c<=t+1){var C=(o.first+1)*e.itemSize;w?s(C,0):s(0,C)}}}else _e(t,n)},dt=function(){return L?e.loaderDisabled?W:[]:de()},pt=function(){return e.columns&&m||w?L&&e.loaderDisabled?m?W[0]:W:e.columns.slice(m?g.cols:g,m?y.cols:y):e.columns},Ae=function(){var t=function(d,I){return Math.floor(d/(I||d))},r=g,n=0;if(p.current){var a=p.current,c=a.scrollTop,o=a.scrollLeft;if(m)r={rows:t(c,e.itemSize[0]),cols:t(o,e.itemSize[1])},n={rows:r.rows+O.rows,cols:r.cols+O.cols};else{var s=w?o:c;r=t(s,e.itemSize),n=r+O}}return{first:g,last:y,viewport:{first:r,last:n}}},Me=function(){var t=re(),r=p.current?p.current.offsetWidth-t.left:0,n=p.current?p.current.offsetHeight-t.top:0,a=function(d,I){return Math.ceil(d/(I||d))},c=function(d){return Math.ceil(d/2)},o=m?{rows:a(n,e.itemSize[0]),cols:a(r,e.itemSize[1])}:a(w?r:n,e.itemSize),s=z||(m?[c(o.rows),c(o.cols)]:c(o));return{numItemsInViewport:o,numToleratedItems:s}},ht=function(){var t=Me(),r=t.numItemsInViewport,n=t.numToleratedItems,a=function(s,h,d){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return We(s+h+(s<d?2:3)*d,I)},c=m?{rows:a(g.rows,r.rows,n[0]),cols:a(g.cols,r.cols,n[1],!0)}:a(g,r,n);et(r),se(n),Oe(c),e.showLoader&&at(m?Array.from({length:r.rows}).map(function(){return Array.from({length:r.cols})}):Array.from({length:r})),e.lazy&&Promise.resolve().then(function(){$.current={first:e.step?m?{rows:0,cols:g.cols}:0:g,last:Math.min(e.step?e.step:c,(e.items||[]).length)},e.onLazyLoad&&e.onLazyLoad($.current)})},St=function(t){e.autoSize&&!t&&Promise.resolve().then(function(){if(b.current){b.current.style.minHeight=b.current.style.minWidth="auto",b.current.style.position="relative",p.current.style.contain="none";var r=[P.getWidth(p.current),P.getHeight(p.current)],n=r[0],a=r[1];(m||w)&&(p.current.style.width=(n<J.current?n:e.scrollWidth||J.current)+"px"),(m||H)&&(p.current.style.height=(a<X.current?a:e.scrollHeight||X.current)+"px"),b.current.style.minHeight=b.current.style.minWidth="",b.current.style.position="",p.current.style.contain=""}})},We=function(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return e.items?Math.min(n?((t=e.columns||e.items[0])===null||t===void 0?void 0:t.length)||0:(e.items||[]).length,r):0},re=function(){if(b.current){var t=getComputedStyle(b.current),r=parseFloat(t.paddingLeft)+Math.max(parseFloat(t.left)||0,0),n=parseFloat(t.paddingRight)+Math.max(parseFloat(t.right)||0,0),a=parseFloat(t.paddingTop)+Math.max(parseFloat(t.top)||0,0),c=parseFloat(t.paddingBottom)+Math.max(parseFloat(t.bottom)||0,0);return{left:r,right:n,top:a,bottom:c,x:r+n,y:a+c}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}},yt=function(){if(p.current){var t=p.current.parentElement,r=e.scrollWidth||"".concat(p.current.offsetWidth||t.offsetWidth,"px"),n=e.scrollHeight||"".concat(p.current.offsetHeight||t.offsetHeight,"px"),a=function(o,s){return p.current.style[o]=s};m||w?(a("height",n),a("width",r)):a("height",n)}},wt=function(){var t=e.items;if(t){var r=re(),n=function(c,o,s){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return ee.current=B(B({},ee.current),Ye({},"".concat(c),(o||[]).length*s+h+"px"))};m?(n("height",t,e.itemSize[0],r.y),n("width",e.columns||t[1],e.itemSize[1],r.x)):w?n("width",e.columns||t,e.itemSize,r.x):n("height",t,e.itemSize,r.y)}},bt=function(t){if(b.current&&!e.appendOnly){var r=t?t.first:g,n=function(s,h){return s*h},a=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ue.current&&(ue.current.style.top="-".concat(h,"px")),Q.current=B(B({},Q.current),{transform:"translate3d(".concat(s,"px, ").concat(h,"px, 0)")})};if(m)a(n(r.cols,e.itemSize[1]),n(r.rows,e.itemSize[0]));else{var c=n(r,e.itemSize);w?a(c,0):a(0,c)}}},$e=function(t){var r=t.target,n=re(),a=function(R,N){return R?R>N?R-N:R:0},c=function(R,N){return Math.floor(R/(N||R))},o=function(R,N,U,le,x,M){return R<=x?x:M?U-le-x:N+x-1},s=function(R,N,U,le,x,M,K){return R<=M?0:Math.max(0,K?R<N?U:R-M:R>N?U:R-2*M)},h=function(R,N,U,le,x,M){var K=N+le+2*x;return R>=x&&(K=K+(x+1)),We(K,M)},d=a(r.scrollTop,n.top),I=a(r.scrollLeft,n.left),C=m?{rows:0,cols:0}:0,T=y,E=!1,A=_.current;if(m){var he=_.current.top<=d,Se=_.current.left<=I;if(!e.appendOnly||e.appendOnly&&(he||Se)){var k={rows:c(d,e.itemSize[0]),cols:c(I,e.itemSize[1])},Xe={rows:o(k.rows,g.rows,y.rows,O.rows,z[0],he),cols:o(k.cols,g.cols,y.cols,O.cols,z[1],Se)};C={rows:s(k.rows,Xe.rows,g.rows,y.rows,O.rows,z[0],he),cols:s(k.cols,Xe.cols,g.cols,y.cols,O.cols,z[1],Se)},T={rows:h(k.rows,C.rows,y.rows,O.rows,z[0]),cols:h(k.cols,C.cols,y.cols,O.cols,z[1],!0)},E=C.rows!==g.rows||T.rows!==y.rows||C.cols!==g.cols||T.cols!==y.cols||me.current,A={top:d,left:I}}}else{var ye=w?I:d,we=_.current<=ye;if(!e.appendOnly||e.appendOnly&&we){var be=c(ye,e.itemSize),Ht=o(be,g,y,O,z,we);C=s(be,Ht,g,y,O,z,we),T=h(be,C,y,O,z),E=C!==g||T!==y||me.current,A=ye}}return{first:C,last:T,isRangeChanged:E,scrollPos:A}},ke=function(t){var r=$e(t),n=r.first,a=r.last,c=r.isRangeChanged,o=r.scrollPos;if(c){var s={first:n,last:a};if(bt(s),ze(n),Oe(a),_.current=o,e.onScrollIndexChange&&e.onScrollIndexChange(s),e.lazy&&ve(n)){var h={first:e.step?Math.min(te(n)*e.step,(e.items||[]).length-e.step):n,last:Math.min(e.step?(te(n)+1)*e.step:a,(e.items||[]).length)},d=!$.current||$.current.first!==h.first||$.current.last!==h.last;d&&e.onLazyLoad&&e.onLazyLoad(h),$.current=h}}},It=function(t){if(e.onScroll&&e.onScroll(t),e.delay){if(ce.current&&clearTimeout(ce.current),ve(g)){if(!L&&e.showLoader){var r=$e(t),n=r.isRangeChanged,a=n||(e.step?ve(g):!1);a&&ie(!0)}ce.current=setTimeout(function(){ke(t),L&&e.showLoader&&(!e.lazy||e.loading===void 0)&&(ie(!1),Ge(te(g)))},e.delay)}}else ke(t)},Be=function(){fe.current&&clearTimeout(fe.current),fe.current=setTimeout(function(){if(p.current){var t=[P.getWidth(p.current),P.getHeight(p.current)],r=t[0],n=t[1],a=r!==J.current,c=n!==X.current,o=m?a||c:w?a:H?c:!1;o&&(se(e.numToleratedItems),J.current=r,X.current=n,Ve.current=P.getWidth(b.current),Fe.current=P.getHeight(b.current))}},e.resizeDelay)},De=function(t){var r=(e.items||[]).length,n=m?g.rows+t:g+t;return{index:n,count:r,first:n===0,last:n===r-1,even:n%2===0,odd:n%2!==0,props:e}},Je=function(t,r){var n=W.length||0;return B({index:t,count:n,first:t===0,last:t===n-1,even:t%2===0,odd:t%2!==0,props:e},r)},de=function(){var t=e.items;return t&&!L?m?t.slice(e.appendOnly?0:g.rows,y.rows).map(function(r){return e.columns?r:r.slice(e.appendOnly?0:g.cols,y.cols)}):w&&e.columns?t:t.slice(e.appendOnly?0:g,y):[]},Rt=function(){p.current&&pe()&&(vt(b.current),ne(),it(),ft(),J.current=P.getWidth(p.current),X.current=P.getHeight(p.current),Ve.current=P.getWidth(b.current),Fe.current=P.getHeight(b.current))},ne=function(){!e.disabled&&pe()&&(yt(),ht(),wt())},pe=function(){if(P.isVisible(p.current)){var t=p.current.getBoundingClientRect();return t.width>0&&t.height>0}return!1};v.useEffect(function(){!He.current&&pe()&&(Rt(),He.current=!0)}),Y(function(){ne()},[e.itemSize,e.scrollHeight,e.scrollWidth]),Y(function(){e.numToleratedItems!==z&&se(e.numToleratedItems)},[e.numToleratedItems]),Y(function(){e.numToleratedItems===z&&ne()},[z]),Y(function(){var f=j.items!==void 0&&j.items!==null,t=e.items!==void 0&&e.items!==null,r=f?j.items.length:0,n=t?e.items.length:0,a=r!==n;if(m&&!a){var c=f&&j.items.length>0?j.items[0].length:0,o=t&&e.items.length>0?e.items[0].length:0;a=c!==o}(!f||a)&&ne();var s=L;e.lazy&&j.loading!==e.loading&&e.loading!==L&&(ie(e.loading),s=e.loading),St(s)}),Y(function(){_.current=m?{top:0,left:0}:0},[e.orientation]),v.useImperativeHandle(i,function(){return{props:e,getElementRef:mt,scrollTo:ge,scrollToIndex:_e,scrollInView:gt,getRenderedRange:Ae}});var zt=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Je(t,r),a=F.getJSXElement(e.loadingTemplate,n);return v.createElement(v.Fragment,{key:t},a)},Ct=function(){var t="p-virtualscroller-loading-icon",r=u({className:t},D("loadingIcon")),n=e.loadingIcon||v.createElement(Jt,Re({},r,{spin:!0})),a=Dt.getJSXIcon(n,B({},r),{props:e});if(!e.loaderDisabled&&e.showLoader&&L){var c=Ie("p-virtualscroller-loader",{"p-component-overlay":!e.loadingTemplate}),o=a;if(e.loadingTemplate)o=W.map(function(d,I){return zt(I,m&&{numCols:O.cols})});else if(e.loaderIconTemplate){var s={iconClassName:t,element:o,props:e};o=F.getJSXElement(e.loaderIconTemplate,s)}var h=u({className:c},D("loader"));return v.createElement("div",h,o)}return null},Ot=function(){if(e.showSpacer){var t=u({ref:xe,style:ee.current,className:"p-virtualscroller-spacer"},D("spacer"));return v.createElement("div",t)}return null},Tt=function(t,r){var n=De(r),a=F.getJSXElement(e.itemTemplate,t,n);return v.createElement(v.Fragment,{key:n.index},a)},Pt=function(){var t=de();return t.map(Tt)},Lt=function(){var t=Pt(),r=Ie("p-virtualscroller-content",{"p-virtualscroller-loading":L}),n=u({ref:b,style:Q.current,className:r},D("content")),a=v.createElement("div",n,t);if(e.contentTemplate){var c={style:Q.current,className:r,spacerStyle:ee.current,contentRef:function(s){return b.current=F.getRefElement(s)},spacerRef:function(s){return xe.current=F.getRefElement(s)},stickyRef:function(s){return ue.current=F.getRefElement(s)},items:de(),getItemOptions:function(s){return De(s)},children:t,element:a,props:e,loading:L,getLoaderOptions:function(s,h){return Je(s,h)},loadingTemplate:e.loadingTemplate,itemSize:e.itemSize,rows:dt(),columns:pt(),vertical:H,horizontal:w,both:m};return F.getJSXElement(e.contentTemplate,c)}return a};if(e.disabled){var Et=F.getJSXElement(e.contentTemplate,{items:e.items,rows:e.items,columns:e.columns});return v.createElement(v.Fragment,null,e.children,Et)}var Nt=Ie("p-virtualscroller",{"p-virtualscroller-inline":e.inline,"p-virtualscroller-both p-both-scroll":m,"p-virtualscroller-horizontal p-horizontal-scroll":w},e.className),jt=Ct(),xt=Lt(),Vt=Ot(),Ft=u({ref:p,className:Nt,tabIndex:e.tabIndex,style:e.style,onScroll:function(t){return It(t)}},oe.getOtherProps(e),D("root"));return v.createElement("div",Ft,xt,Vt,jt)}));Qt.displayName="VirtualScroller";export{Qt as V};
